# Maailma kuulee

## 12.9.2024

## x) Lue ja tiivistä 

**Susanna Lehto 2022: Teoriasta käytäntöön pilvipalvelimen avulla (h4) (lähde: Susanna Lehto, https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/)**

- Pilvipalvelinta vuokratessa määritellään, minkälainen virtuaalikone halutaan vuokrata, ja mistä datakeskuksesta se halutaan vuokrata.

- Pilvipalvelimeen tulee asentaa palomuuri, mutta siihen pitää muistaa tehdä reiät SSH-yhteyttä (etäyhteyttä) ja verkkopalvelinta varten.

- Jotta uudessa pilvipalvelimessa voi luoda uusia nettisivuja normaalina käyttäjänä, tulee palvelimeen luoda ensin itselleen sudo oikeudet, eli ns. "pääkäyttäjä" oikeudet.

- Myös pilvipalvelimen ohjelmat ja tietoturvapäivitykset on hyvä pitää ajantasalla, ne saa päivitettyä komennoilla `sudo apt-get update`, `sudo apt-get upgrade` ja `sudo apt-get dist-upgrade`.

**First Steps on a New Virtual Private Server - an Example on DigitalOcean and Ubuntu 16.04 LTS (lähde: Tero Karvinen, https://terokarvinen.com/2017/first-steps-on-a-new-virtual-private-server-an-example-on-digitalocean/)**

Tiivistetysti uuden pilvipalvelimen käyttöönotto tapahtuu seuraavassa järjestyksessä:

- Luo virtuaalinen palvelin jollain palveluntarjoajalla (esim. DigitalOcean).
- Kirjaudu palvelimelle oman virtuaalikoneen kautta root -käyttäjänä, ja valitse **aina** hyvä salasana.
- Tee palvelimen palomuuriin reikä etäyhteyttä varten ja laita palomuuri päälle.
- Luo itsellesi palvelimeen sudo -oikeudet.
- Lukitse root -käyttäjä ja estä sillä kirjautuminen etäyhteyden kautta.
- Päivitä palvelimen ohjelmistot.

## a) Vuokraa oma virtuaalipalvelin

> Klo 18:50

Ennen oman virtuaalipalvelimen vuokrausta laitoin virtuaalikoneeni tulille ja päivitin ohjelmistot tutulla komennolla `sudo apt-get update`.

Päätin vuokrata palvelimen DigitalOceanin kautta, sillä sen käyttöönotto käytiin tunnilla läpi, sain käyttöönotosta hyvät muistiinpanot itselleni ja siihen liittyviä ohjeita löytyi hyvin kurssin tämän viikon tehtävistä, ja koska sinne sai uutena käyttäjänä $200 edestä krediittiä.

Rekisteröidyin DigitalOcean sovellukseen GitHubin tunnuksia käyttäen. Tunnusten luonnissa piti varmistaa ettei ole robotti, ja valita neljään eri kuvaan oikeat vastaukset nuolinäppäimiä käyttäen.

![image](https://github.com/user-attachments/assets/4e8a3ef9-2e44-49ac-ae46-e9625065f405)

Ennen kirjautumista piti vielä täyttää itsestä tietoja, jokaiseen piti valita jotain tai ei päässyt eteenpäin.

![image](https://github.com/user-attachments/assets/28790a3b-c2fb-4d82-8cca-99245ba14031)

Seuraavaksi piti täyttää maksutiedot. Valitsin tässä vaiheessa mielummin kortin kuin PayPalin, koska ilmeisesti PayPalin kautta piti maksaa ennakkoon summa, kun taas kortin kautta saisi käyttöönsä ilmaiskrediitit ilman maksua. Syötin siis kortin tietoni ja jatkoin eteenpäin. 

![image](https://github.com/user-attachments/assets/23c8018a-4b6f-4ead-98b5-5ebfa6972827)

Seuraavaksi minua pyydettiin vahvistamaan 5 dollarin maksu kortiltani, eli ilmeisesti kuitenkin jotain piti maksaa että pääsi DititalOceania käyttämään. Vahvistin maksun ja tunnusten luonti onnistui, ja sain käyttöön 200 dollaria krediitteinä.

![image](https://github.com/user-attachments/assets/568cfc00-5634-4852-8e6a-c7fb2b11e282)

Tunnusten luonnin jälkeen klikkasin sivun yläreunasta "Explore our Control Panel", ja sieltä klikkasin oikeasta yläreunasta "My account", ja kävin tarkistamassa että tietoni ovat oikein. Jostain syystä en päässyt pois profiilinäkymästä klikkaamalla logoa tai "Back to Control Panel" tai edes korjaamalla urlin, sillä se heitti minut jatkuvasti takaisin profiilisivulle. 

![image](https://github.com/user-attachments/assets/a5c8613c-de18-4a23-a312-f73391c87b6d)
(Kuvasta on poistettu sähköpostiosoitteeni.)

Kokeilin päivittää nimeäni, mutta en silti päässyt takaisin perusnäkymään. Kirjauduin siis ulos ja uudelleen sisään jotta pääsin takaisin etusivulle. Susannan raportista viisastuneena halusin myös asettaa hälytysrajat maksuihin, jotta muistaisin irtisanoa palvelun jos sitä en enää kurssin jälkeen haluaisi pitää. (lähde: Susanna Lehto, https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/)

Valitsin päänäkymästä vasemmasta valikosta "Billing", jonka jälkeen sivun välilehdistä "Settings", ja sen alta "Billing Alert" -kohdasta "Enable Alert". Käytin Susannan logiikkaa, ja asetin rajaksi 4 dollaria. (lähde: Susanna Lehto, https://susannalehto.fi/2022/teoriasta-kaytantoon-pilvipalvelimen-avulla-h4/)

![image](https://github.com/user-attachments/assets/f4ea7969-dd17-47a2-a7d5-34fff9ef8a3f)

Seuraavaksi aloin hankkimaan itselleni virtuaalipalvelinta valitsemalla vasemman reunan valikosta "Droplets", ja valitsemalla aukeavan sivun yläreunan vihreästä "Create" painikkeesta kohdan "Droplets".

![image](https://github.com/user-attachments/assets/c25319ed-4c1c-410f-b32e-e2fe2456f2f5)

Datakeskukseksi valitsin Amsterdamin, sillä se lienee lähimpänä, ja myös tunnilla oli puhetta siitä, että kannattaa valita lähinnä oleva datakeskus, jotta tiedonsiirrot sujuisivat mahdollisimman nopeasti.

![image](https://github.com/user-attachments/assets/f6e68b51-1883-47cd-93c8-8301ace7537f)

Käyttöjärjestelmäksi valitsin Debian 12 x64, sillä sitä olen nyt käyttänyt virtuaalikoneellakin.

![image](https://github.com/user-attachments/assets/4574846e-0b6c-45c9-97c8-b46cb012945c)

Seuraavaksi valitsin tyypin ja koon. Valitsin Basic -paketin tavallisella SSD-levyllä, ja 1 GB muistilla, nämä olin merkinnyt myös omiin muistiinpanoihini tunnilta.

![image](https://github.com/user-attachments/assets/8f731c27-540f-467f-b59b-a15e33f81f14)

Tunnilla tehtyihin muistiinpanoihini olin merkannut "ei lisäjuttuja", eli skippasin kaikki lisäpalvelut, jota DigitalOcean halusi minulle tarjota.

![image](https://github.com/user-attachments/assets/7ded8862-0fa5-4af7-b738-79dc0ebf9767)

Seuraavaksi valitsin autentikointimenetelmäksi salasanan, sillä en osaa käyttää SSH-avaimia. Tunnilta on muistunut jo mieleen Teron muistutukset siitä, että salasanan tulee **aina** olla hyvä, joten keksin vahvan salasanan root-käyttäjälle.

![image](https://github.com/user-attachments/assets/c049a614-3919-43cd-921f-dee5aa531b2f)

Vielä tarjottiin lisäpalveluita, joita en valinnut.

![image](https://github.com/user-attachments/assets/94285cab-5ca6-438b-8254-1809737f6e71)

Viimeisenä valitsin, kuinka monta palvelinta luon samoilla määrityksillä, ja nimesin virtuaalipalvelimeni ei-kovin-kuvaavalla-sanalla, ja painoin "Create Droplet".

![image](https://github.com/user-attachments/assets/dbf0f8c5-ce1c-44e1-a18a-57d0898c0084)

Hetken kuluttua virtuaalipalvelin oli valmis, ja sain IP-osoitteen tietooni.

![image](https://github.com/user-attachments/assets/7c39de4a-ee67-40ef-b63e-fdee2e8043c8)








































